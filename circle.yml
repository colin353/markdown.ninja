machine:
  services:
    - redis
dependencies:
  cache_directories:
    - "~/node_modules"
  override:
    # Restore the cache, if it exists.
    - etc/circle_restore_cache.sh
    # Install NPM requirements
    - cd app && npm install --dev
    # Refresh the cache.
    - rm -rf ~/node_modules
    - mv admin/node_modules ~/
test:
  override:
    # Check lint, flow, etc.
    - ./etc/complain.sh
    # Build all the binaries.
    - ./etc/build.sh
